<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday! âœ¨</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&family=Dancing+Script:wght@700&display=swap');

        * { scroll-behavior: smooth; }
        body { 
            margin: 0; padding: 0; 
            font-family: 'Poppins', sans-serif; 
            background: #fff5f5; 
            overflow: hidden; /* Mengunci scroll manual */
        }

        section { 
            height: 100vh; 
            width: 100%;
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center; 
            padding: 20px; 
            text-align: center; 
            box-sizing: border-box;
        }

        /* --- COVER & KUE --- */
        #cover { background: radial-gradient(circle, #ffafbd, #ffc3a0); color: white; }
        .cake { position: relative; width: 250px; height: 200px; display: flex; justify-content: center; align-items: flex-end; cursor: pointer; margin-bottom: 20px; }
        .layer { position: absolute; border-radius: 15px 15px 5px 5px; box-shadow: inset 0 5px 10px rgba(255,255,255,0.3); }
        .layer-1 { width: 200px; height: 60px; background: #6d4c41; bottom: 0; }
        .layer-2 { width: 160px; height: 50px; background: #ff80ab; bottom: 60px; }
        .layer-3 { width: 120px; height: 40px; background: #f8bbd0; bottom: 110px; }
        .candle { width: 12px; height: 45px; background: white; position: absolute; bottom: 150px; left: 50%; transform: translateX(-50%); border-radius: 3px; }
        .flame { width: 18px; height: 28px; background: #ffca28; border-radius: 50%; position: absolute; top: -30px; left: -3px; box-shadow: 0 0 20px #ffeb3b; animation: flicker 0.1s infinite alternate; }
        @keyframes flicker { from { transform: scale(1); } to { transform: scale(1.2); } }

        /* --- KARTU UCAPAN --- */
        #card { background: white; display: none; }
        .typing-box { font-family: 'Dancing Script', cursive; font-size: 1.6rem; color: #ad1457; max-width: 500px; padding: 30px; border-radius: 30px; background: #fff0f3; border: 2px solid #f8bbd0; min-height: 150px; }

        /* --- SLIDESHOW FOTO --- */
        #photos { background: #fff0f3; display: none; }
        .slider { width: 300px; height: 400px; border: 8px solid white; border-radius: 20px; overflow: hidden; box-shadow: 0 15px 35px rgba(0,0,0,0.2); position: relative; }
        .slides { display: flex; transition: transform 1s cubic-bezier(0.45, 0, 0.55, 1); }
        .slides img { width: 300px; height: 400px; object-fit: cover; flex-shrink: 0; }

        /* --- BUTTONS --- */
        .btn { 
            margin-top: 30px; padding: 15px 40px; background: #ff4081; color: white; 
            border: none; border-radius: 50px; font-weight: bold; cursor: pointer; 
            box-shadow: 0 5px 15px rgba(255,64,129,0.4); display: none; 
        }
        .btn-active { display: inline-block; animation: fadeInUp 0.5s ease; }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <audio id="bgMusic" loop><source src="musik.mp3" type="audio/mpeg"></audio>
    <audio id="fireworkSound"><source src="kembang-api.mp3" type="audio/mpeg"></audio>

    <section id="cover">
        <h1 style="font-size: 2.2rem;">Happy Birthday! ðŸŽ‚</h1>
        <p id="hint">Sentuh lilinnya...</p>
        <div class="cake" onclick="blown()">
            <div class="layer layer-1"></div>
            <div class="layer layer-2"></div>
            <div class="layer layer-3"></div>
            <div class="candle"><div id="api" class="flame"></div></div>
        </div>
        <button id="btn1" class="btn" onclick="showNext('card')">Buka Pesan âœ¨</button>
    </section>

    <section id="card">
        <div id="typewriter" class="typing-box"></div>
        <button id="btn2" class="btn" onclick="showNext('photos')">Lihat Kejutan Terakhir ðŸ“¸</button>
    </section>

    <section id="photos">
        <h2 style="color: #ff4081; font-family: 'Dancing Script'; font-size: 2.5rem;">Our Memories</h2>
        <div class="slider">
            <div class="slides" id="track">
                <img src="foto1.jpg"> <img src="foto2.jpg"> <img src="foto3.jpg"> <img src="foto4.jpg">
                <img src="foto5.jpg"> <img src="foto6.jpg"> <img src="foto7.jpg"> <img src="foto8.jpg">
            </div>
        </div>
        <p style="margin-top: 25px; font-weight: bold; color: #ff4081;">Rayakan Ruang Barumu! ðŸ¥³</p>
    </section>

    <script>
        const bgMusic = document.getElementById('bgMusic');
        const fwSound = document.getElementById('fireworkSound');
        const msg = "Selamat ulang tahun! ðŸ¥³ Di usiamu yang baru ini, semoga 'Ruang Baru' milikmu penuh dengan petualangan hebat dan kebahagiaan yang tulus. Terima kasih sudah mengizinkanku menjadi bagian dari harimu. Enjoy your day! âœ¨";
        let charIdx = 0;

        function blown() {
            document.getElementById('api').style.display = 'none';
            document.getElementById('hint').innerText = "Make a wish...";
            fwSound.play();
            bgMusic.play();
            
            let count = 0;
            const fwInterval = setInterval(() => {
                confetti({ particleCount: 100, spread: 70, origin: { y: 0.6, x: Math.random() } });
                count++;
                if(count > 4) clearInterval(fwInterval);
            }, 400);

            document.getElementById('btn1').classList.add('btn-active');
        }

        function showNext(nextId) {
            const currentSection = (nextId === 'card') ? document.getElementById('cover') : document.getElementById('card');
            const nextSection = document.getElementById(nextId);
            
            nextSection.style.display = 'flex';
            nextSection.scrollIntoView({ behavior: 'smooth' });

            // LOGIKA PENGUNCIAN: Hapus elemen sebelumnya setelah transisi selesai
            setTimeout(() => {
                currentSection.remove(); // Menghapus section lama agar tidak bisa kembali ke atas
                window.scrollTo(0, 0); // Reset posisi scroll ke paling atas (halaman baru)
            }, 800);

            if(nextId === 'card') {
                setTimeout(startTyping, 1000);
            } else if(nextId === 'photos') {
                startSlideshow();
            }
        }

        function startTyping() {
            if (charIdx < msg.length) {
                document.getElementById("typewriter").innerHTML += msg.charAt(charIdx);
                charIdx++;
                setTimeout(startTyping, 70);
            } else {
                document.getElementById('btn2').classList.add('btn-active');
            }
        }

        function startSlideshow() {
            let step = 0;
            const track = document.getElementById('track');
            setInterval(() => {
                step = (step + 1) % 8;
                track.style.transform = `translateX(-${step * 300}px)`;
            }, 3500);
        }
    </script>
</body>
</html>
